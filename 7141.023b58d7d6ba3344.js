"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7141],{7141:(V,v,d)=>{d.r(v),d.d(v,{MapsModule:()=>R});var _=d(8986),M=d(467),e=d(3953),h=d(3443),s=d(4742);const b=["map"];let f=(()=>{var n;class l{constructor(t,o){this.dataService=t,this.loadingController=o,this.dataService.getData("device").subscribe(a=>{this.allDevices=a.success})}ngOnInit(){}ngAfterViewInit(){this.loadMap()}login(){this.dataService.generateToken()}goalFirst(){var t=this;return(0,M.A)(function*(){let a,o=[];t.allDevices.forEach(r=>{o.push({deviceId:r.id,dateunix:r.updatedate})}),a={deviceIDs:o,fromLastPoint:!0};const c=yield t.loadingController.create({message:"Please wait..."});c.present(),t.dataService.postData("trackerdata/getalllastpositions",a).subscribe(r=>{for(const p in r.success)if(r.success.hasOwnProperty(p)){let m,g;m=r.success[p].length,g=r.success[p][m-1],t.addMarker(new window.google.maps.LatLng(g.lat,g.lng),p),c.dismiss()}})})()}goalThird(){}loadMap(){this.map=new window.google.maps.Map(this.mapRef.nativeElement,{center:new window.google.maps.LatLng(17.385044,78.486671),zoom:5,streetViewControl:!1,mapTypeId:window.google.maps.MapTypeId.ROADMAP}),this.addMarker(new window.google.maps.LatLng(17.385044,78.486671))}addMarker(t,o=""){new window.google.maps.Marker({position:t,map:this.map,title:o})}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(h.u),e.rXU(s.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-dashboard"]],viewQuery:function(t,o){if(1&t&&e.GBs(b,7),2&t){let a;e.mGM(a=e.lsd())&&(o.mapRef=a.first)}},decls:14,vars:0,consts:[["map",""],["id","mainContent"],["id","button1","color","primary",3,"click"],["id","button1","color","primary"],["id","map",2,"height","100%","width","100%"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"ion-app")(1,"ion-content",1)(2,"ion-button",2),e.bIt("click",function(){return e.eBV(a),e.Njj(o.login())}),e.EFF(3," Login "),e.k0s(),e.j41(4,"ion-button",2),e.bIt("click",function(){return e.eBV(a),e.Njj(o.goalFirst())}),e.EFF(5," Goal 1 "),e.k0s(),e.j41(6,"ion-button",2),e.bIt("click",function(){return e.eBV(a),e.Njj(o.goalThird())}),e.EFF(7," Goal 2 "),e.k0s(),e.j41(8,"ion-button",2),e.bIt("click",function(){return e.eBV(a),e.Njj(o.goalThird())}),e.EFF(9," Goal 3 "),e.k0s(),e.j41(10,"ion-button",3),e.EFF(11," Goal 4 "),e.k0s(),e.nrm(12,"div",4,0),e.k0s()()}},dependencies:[s.U1,s.Jm,s.W9]}),l})();const C=["map"];let k=(()=>{var n;class l{constructor(t,o){this.dataService=t,this.loadingController=o,this.dataService.getData("device").subscribe(a=>{this.allDevices=a.success,this.goalFirst()})}ngAfterViewInit(){this.loadMap()}goalFirst(){var t=this;return(0,M.A)(function*(){let a,o=[];t.allDevices.forEach(r=>{o.push({deviceId:r.id,dateunix:r.updatedate})}),a={deviceIDs:o,fromLastPoint:!0};const c=yield t.loadingController.create({message:"Please wait..."});c.present(),t.dataService.postData("trackerdata/getalllastpositions",a).subscribe(r=>{c.dismiss();let u=[];for(const p in r.success)if(r.success.hasOwnProperty(p)){let m,g;m=r.success[p].length,g=r.success[p][m-1],u.push(g)}t.loadMap(u[0].lat,u[0].lng),u.forEach((p,m)=>{t.addMarker(new window.google.maps.LatLng(p.lat,p.lng),"device "+m)})})})()}loadMap(t=17.385044,o=78.486671){this.map=new window.google.maps.Map(this.mapRef.nativeElement,{center:new window.google.maps.LatLng(t,o),zoom:5,streetViewControl:!1,mapTypeId:window.google.maps.MapTypeId.ROADMAP})}addMarker(t,o=""){new window.google.maps.Marker({position:t,map:this.map,title:o})}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(h.u),e.rXU(s.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-goal-1"]],viewQuery:function(t,o){if(1&t&&e.GBs(C,7),2&t){let a;e.mGM(a=e.lsd())&&(o.mapRef=a.first)}},decls:3,vars:0,consts:[["map",""],["has-subheader","false"],["id","map",2,"height","100%","width","100%"]],template:function(t,o){1&t&&(e.j41(0,"ion-content",1),e.nrm(1,"div",2,0),e.k0s())},dependencies:[s.W9]}),l})();var w=d(177);const y=["map"];function G(n,l){if(1&n){const i=e.RV6();e.j41(0,"ion-item")(1,"ion-button",6),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.deviceOnMap(o.id))}),e.EFF(2),e.k0s()()}if(2&n){const i=l.$implicit;e.R7$(2),e.JRh(i.id)}}let D=(()=>{var n;class l{constructor(t,o){this.dataService=t,this.loadingController=o,this.getDevices()}getDevices(){this.dataService.getData("device").subscribe(t=>{this.allDevices=t.success,console.log(this.allDevices)})}ngAfterViewInit(){this.loadMap()}deviceOnMap(t){this.dataService.getData("trackerdata/"+t+"/last_points?lastPoints=1").subscribe(o=>{this.loadMap(o.success[0].lat,o.success[0].lng)})}loadMap(t=17.385044,o=78.486671){this.map=new window.google.maps.Map(this.mapRef.nativeElement,{center:new window.google.maps.LatLng(t,o),zoom:5,streetViewControl:!1,mapTypeId:window.google.maps.MapTypeId.ROADMAP}),this.addMarker(new window.google.maps.LatLng(t,o))}addMarker(t,o=""){new window.google.maps.Marker({position:t,map:this.map,title:o})}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(h.u),e.rXU(s.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-goal-2"]],viewQuery:function(t,o){if(1&t&&e.GBs(y,7),2&t){let a;e.mGM(a=e.lsd())&&(o.mapRef=a.first)}},decls:8,vars:1,consts:[["map",""],["has-subheader","false"],["size","4"],[4,"ngFor","ngForOf"],["size","8"],["id","map",2,"height","100%","width","100%"],["color","primary",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-content",1)(1,"ion-grid")(2,"ion-row")(3,"ion-col",2),e.DNE(4,G,3,1,"ion-item",3),e.k0s(),e.j41(5,"ion-col",4),e.nrm(6,"div",5,0),e.k0s()()()()),2&t&&(e.R7$(4),e.Y8G("ngForOf",o.allDevices))},dependencies:[s.Jm,s.hU,s.W9,s.lO,s.uz,s.ln,w.Sq],styles:["ion-grid[_ngcontent-%COMP%]{height:100vh;overflow:auto;display:grid}"]}),l})();const j=["map"];function F(n,l){if(1&n){const i=e.RV6();e.j41(0,"ion-item")(1,"ion-button",6),e.bIt("click",function(){const o=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.deviceOnMap(o.id))}),e.EFF(2),e.k0s()()}if(2&n){const i=l.$implicit;e.R7$(2),e.JRh(i.id)}}let O=(()=>{var n;class l{constructor(t,o){this.dataService=t,this.loadingController=o,this.getDevices()}getDevices(){this.dataService.getData("device").subscribe(t=>{this.allDevices=t.success,console.log(this.allDevices)})}ngAfterViewInit(){this.loadMap()}deviceOnMap(t){this.dataService.getData("trackerdata/"+t+"/last_points?lastPoints=50").subscribe(o=>{let a=[];this.loadMap(o.success[0].lat,o.success[0].lng),o.success.forEach(c=>{a.push({lat:c.lat,lng:c.lng}),this.addMarker(new window.google.maps.LatLng(c.lat,c.lng,t))}),this.drawPolyline(a)})}loadMap(t=17.385044,o=78.486671){this.map=new window.google.maps.Map(this.mapRef.nativeElement,{center:new window.google.maps.LatLng(t,o),zoom:10,streetViewControl:!1,mapTypeId:window.google.maps.MapTypeId.ROADMAP})}addMarker(t,o=""){new window.google.maps.Marker({position:t,map:this.map,title:o})}drawPolyline(t=[]){new window.google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:4}).setMap(this.map)}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(h.u),e.rXU(s.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-goal-3"]],viewQuery:function(t,o){if(1&t&&e.GBs(j,7),2&t){let a;e.mGM(a=e.lsd())&&(o.mapRef=a.first)}},decls:8,vars:1,consts:[["map",""],["has-subheader","false"],["size","4"],[4,"ngFor","ngForOf"],["size","8"],["id","map",2,"height","100%","width","100%"],["color","primary",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-content",1)(1,"ion-grid")(2,"ion-row")(3,"ion-col",2),e.DNE(4,F,3,1,"ion-item",3),e.k0s(),e.j41(5,"ion-col",4),e.nrm(6,"div",5,0),e.k0s()()()()),2&t&&(e.R7$(4),e.Y8G("ngForOf",o.allDevices))},dependencies:[s.Jm,s.hU,s.W9,s.lO,s.uz,s.ln,w.Sq],styles:["ion-grid[_ngcontent-%COMP%]{height:100vh;overflow:auto;display:grid}"]}),l})(),T=(()=>{var n;class l{constructor(){}ngOnInit(){}}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-goal-4"]],decls:2,vars:0,template:function(t,o){1&t&&(e.j41(0,"p"),e.EFF(1," goal-4 works!\n"),e.k0s())}}),l})();var I=d(4341);const L=[{path:"",component:f},{path:"dashboard",component:f},{path:"goal-first",component:k},{path:"goal-second",component:D},{path:"goal-third",component:O},{path:"goal-fourth",component:T}];let R=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n,bootstrap:[f]}),n.\u0275inj=e.G2t({imports:[_.iI.forChild(L),I.YN,s.bv,w.MD,_.iI]}),l})()}}]);